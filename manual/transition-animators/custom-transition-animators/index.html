<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../favicon.ico">
        
        <title>Custom Transition Animators - Canvas Flow</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-57773606-3', 'canvasflow.xyz');
            ga('send', 'pageview');
        </script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../..">Canvas Flow</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Manual <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../contents/">Contents</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Canvas Controllers</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../canvas-controllers/introduction/">Introduction</a>
</li>
            
<li >
    <a href="../../canvas-controllers/creating-a-canvas-controller/">Creating A Canvas Controller</a>
</li>
            
<li >
    <a href="../../canvas-controllers/canvas-controller-scenes/">Canvas Controller Scenes</a>
</li>
            
<li >
    <a href="../../canvas-controllers/presentation-and-dismissal/">Presentation & Dismissal</a>
</li>
            
<li >
    <a href="../../canvas-controllers/canvas-controller-life-cycle/">Canvas Controller Life Cycle</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Storyboards</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../storyboards/introduction/">Introduction</a>
</li>
            
<li >
    <a href="../../storyboards/creating-a-storyboard/">Creating A Storyboard</a>
</li>
            
<li >
    <a href="../../storyboards/storyboard-nodes/">Storyboard Nodes</a>
</li>
            
<li >
    <a href="../../storyboards/storyboard-transitions/">Storyboard Transitions</a>
</li>
            
<li >
    <a href="../../storyboards/presenting-a-storyboard/">Presenting A Storyboard</a>
</li>
            
<li >
    <a href="../../storyboards/custom-storyboard-hooks/">Custom Storyboard Hooks</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Transition Animators</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../introduction/">Introduction</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Default Transition Animators</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../default-transition-animators/transition-animator-default/">Default Transition Animator</a>
</li>
            
<li >
    <a href="../default-transition-animators/transition-animator-fade-to-color/">Fade To Color Transition Animator</a>
</li>
            
<li >
    <a href="../default-transition-animators/transition-animator-slide/">Slide Transition Animator</a>
</li>
            
<li >
    <a href="../default-transition-animators/transition-animator-scale/">Scale Transition Animator</a>
</li>
            
<li >
    <a href="../default-transition-animators/transition-animator-scale-and-fade/">Scale And Fade Background Transition Animator</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../using-a-transition-animator/">Using A Transition Animator</a>
</li>
            
<li class="active">
    <a href="./">Custom Transition Animators</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Miscellaneous</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../miscellaneous/preferences/">Preferences</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Tutorials</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../tutorials/custom-storyboard-hook-toggle/custom-storyboard-hook-toggle/">Creating a Custom Storyboard Hook For UI.Toggle</a>
</li>
            
<li >
    <a href="../../tutorials/custom-transition-animator-dotween/custom-transition-animator-dotween/">Creating A Custom Transition Animator Using DOTween</a>
</li>
            
<li >
    <a href="../../tutorials/using-curved-ui-with-canvas-flow/using-curved-ui-with-canvas-flow/">Using Curved UI with Canvas Flow</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Scripting Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../scripting-reference/contents/">Contents</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Canvas Controllers</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../scripting-reference/canvas-controller/CanvasController/">CanvasController</a>
</li>
            
<li >
    <a href="../../../scripting-reference/canvas-controller/CanvasControllerExtensions/">CanvasController Extensions</a>
</li>
            
<li >
    <a href="../../../scripting-reference/canvas-controller/CanvasControllerPresentationMode/">CanvasControllerPresentationMode</a>
</li>
            
<li >
    <a href="../../../scripting-reference/canvas-controller/CanvasControllerTransitionContext/">CanvasControllerTransitionContext</a>
</li>
            
<li >
    <a href="../../../scripting-reference/canvas-controller/CanvasControllerTransitioningAnimator/">CanvasControllerTransitioningAnimator</a>
</li>
            
<li >
    <a href="../../../scripting-reference/canvas-controller/CanvasControllerWorldSpaceContainer/">CanvasControllerWorldSpaceContainer</a>
</li>
            
<li >
    <a href="../../../scripting-reference/canvas-controller/ICanvasControllerTransitioningAnimator/">ICanvasControllerTransitioningAnimator</a>
</li>
            
<li >
    <a href="../../../scripting-reference/canvas-controller/ICanvasControllerTransitioningAnimatorVendor/">ICanvasControllerTransitioningAnimatorVendor</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Storyboards</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../scripting-reference/storyboards/Storyboard/">Storyboard</a>
</li>
            
<li >
    <a href="../../../scripting-reference/storyboards/StoryboardData/">StoryboardData</a>
</li>
            
<li >
    <a href="../../../scripting-reference/storyboards/StoryboardPresentationSpace/">StoryboardPresentationSpace</a>
</li>
            
<li >
    <a href="../../../scripting-reference/storyboards/hooks/StoryboardHook/">StoryboardHook</a>
</li>
            
<li >
    <a href="../../../scripting-reference/storyboards/StoryboardTransition/">StoryboardTransition</a>
</li>
            
<li >
    <a href="../../../scripting-reference/storyboards/StoryboardTransitionDirection/">StoryboardTransitionDirection</a>
</li>
            
<li >
    <a href="../../../scripting-reference/storyboards/StoryboardTransitionEvent/">StoryboardTransitionEvent</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Extensions And Convenience</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../scripting-reference/routine/Routine/">Routine</a>
</li>
            
<li >
    <a href="../../../scripting-reference/extensions/DynamicObjectExtensions/">DynamicObjectExtensions</a>
</li>
            
<li >
    <a href="../../../scripting-reference/extensions/RectTransformExtensions/">RectTransformExtensions</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Releases <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../../release-notes/1.1/">1.1</a>
</li>
                            
<li >
    <a href="../../../release-notes/1.0/">1.0</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../using-a-transition-animator/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../miscellaneous/preferences/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#custom-transition-animators">Custom Transition Animators</a></li>
            <li><a href="#1-create-a-custom-transition-animator-script">1. Create A Custom Transition Animator Script</a></li>
            <li><a href="#2-the-animate-transition-method">2. The Animate Transition Method</a></li>
            <li><a href="#3-the-animate-transition-for-initial-canvas-controller-method-optional">3. The Animate Transition For Initial Canvas Controller Method (Optional)</a></li>
            <li><a href="#4-performing-the-animation">4. Performing The Animation</a></li>
            <li><a href="#5-use-your-custom-transition-animator">5. Use Your Custom Transition Animator</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="custom-transition-animators">Custom Transition Animators</h1>
<p>You may create your own transition animators to implement a custom transition animation between canvas controllers. If following the steps below, your custom transition animator will be displayed in Unity's <em>Create</em> menu alongside the default transition animators, and will therefore also be compatible with storyboards.</p>
<blockquote>
<p>Canvas Flow's default transition animators are included as .cs files. This means you can easily inspect their source code, which is recommended when creating your first custom transition animator. They can be found in the Project inspector at <em>Canvas Flow/Transition Animators/</em>.</p>
</blockquote>
<p><p/></p>
<blockquote>
<p>See also: <a href="../../tutorials/custom-transition-animator-dotween/custom-transition-animator-dotween/">Creating A Custom Transition Animator Using DOTween</a></p>
</blockquote>
<h2 id="1-create-a-custom-transition-animator-script">1. Create A Custom Transition Animator Script</h2>
<p>To begin creating a new transition animator, open Unity's <em>Create</em> menu - by either right-clicking in the Project window or selecting Assets in the menu bar - and selecting <em>Create/Canvas Flow/Custom Transition Animator</em>. Enter a name and a directory for your new animator. This will generate a new transition animator script file at the specified location.</p>
<p>The generated script contains two methods for you to implement.</p>
<ul>
<li><a href="#2-the-animate-transition-method"><code>AnimateTransition()</code></a></li>
<li><a href="#3-the-animate-transition-for-initial-canvas-controller-method-optional"><code>AnimateTransitionForInitialCanvasController()</code></a></li>
</ul>
<h2 id="2-the-animate-transition-method">2. The Animate Transition Method</h2>
<p>As described in <a href="../using-a-transition-animator">Using A Transition Animator</a>, an instance of your custom transition animator will be <em>vended</em> to Canvas Flow at runtime when the transition is about to be performed. Once this has occurred, Canvas Flow will tell the transition animator to perform the transition by calling its <a href="../../../scripting-reference/canvas-controller/icanvascontrollertransitioninganimator#animatetransition"><code>AnimateTransition()</code></a> method. This is where you can perform your custom animation. Please see <a href="#performing-the-animation">Performing The Animation</a> for more details.</p>
<pre><code class="csharp">public override void AnimateTransition(CanvasControllerTransitionContext transitionContext)
{
    /*  
      *  Do your custom animation with the source and destination content
      *  here. For example:
      *
      *  CanvasController source = transitionContext.sourceCanvasController;
      *  CanvasController destination = transitionContext.destinationCanvasController;
      *
      *  source.ContentPosition = ...
      *  destination.ContentScale = ...
      */

    /*  
     *  Call CompleteTransition() on the transition context once you have
     *  performed your custom animation.
     */
    transitionContext.CompleteTransition();
}
</code></pre>

<blockquote>
<p>When your transition animator has completed its animation, you must call <a href="../../../scripting-reference/canvas-controller/CanvasControllerTransitionContext/#completetransition">CompleteTransition</a> on the provided transition context. This tells Canvas Flow that the custom animation has been performed and to complete the transition.</p>
</blockquote>
<h2 id="3-the-animate-transition-for-initial-canvas-controller-method-optional">3. The Animate Transition For Initial Canvas Controller Method (Optional)</h2>
<p>The <code>AnimateTransitionForInitialCanvasController()</code> method is called on your transition animator when the transition is presenting or dismissing an initial canvas controller. An initial canvas controller is one with no presenter - i.e. it was the first canvas controller presented, perhaps from a storyboard entry transition or using <a href="../../../scripting-reference/canvas-controller/CanvasController/#presentinitialcanvascontroller">PresentInitialCanvasController</a>. Therefore, you only need to implement this method if you intend to use your transition animator on transitions involving an initial canvas controller.</p>
<p>The only difference from the <a href="#2theanimatetransitionmethod">AnimateTransition</a> method is that either the context's <code>sourceCanvasController</code> or <code>destinationCanvasController</code> will be null, depending on whether the transition context <code>isUpstream</code> - i.e. it is presenting/dismissing to <em>'nothing'</em>.</p>
<p>The default transition animator, found in <em>Canvas Flow/Transition Animators/DefaultTransitionAnimator.cs</em> simply forwards this method to <code>AnimateTransition()</code> as it only ever operates on the presented canvas, like so:</p>
<pre><code class="csharp">public override void AnimateTransitionInvolvingInitialCanvasController(
    CanvasControllerTransitionContext transitionContext)
{
    /*
     *  We support transitions to and from the initial canvas controller by
     *  default in our main AnimateTransition() method as we only operate on the
     *  presented canvas controller, so we can just forward to that method.
     */

    AnimateTransition(transitionContext);
}
</code></pre>

<p>Please see <em>Canvas Flow/Transition Animators/FadeToColorTransitionAnimator.cs</em> for an example of how different behaviour can be implemented when presenting/dismissing the initial canvas controller.</p>
<h2 id="4-performing-the-animation">4. Performing The Animation</h2>
<p>Below is an example of a complete <code>AnimateTransition</code> method, which animates the presented canvas controller from/to the bottom of the screen. This will serve as a basis for presenting several useful pointers when animating canvas controllers.</p>
<blockquote>
<p>Note that you are free to animate the context's canvas controllers however you wish, including using external animation tools.</p>
</blockquote>
<pre><code class="csharp">public override void AnimateTransition(CanvasControllerTransitionContext transitionContext)
{
    // Determine the target canvas controller - the one being presented or dismissed.
    var targetCanvasController = (transitionContext.isUpstream) ?
        transitionContext.sourceCanvasController :
            transitionContext.destinationCanvasController;

    // Determine the content's start position.
    Vector3 contentStartPosition = (transitionContext.isUpstream) ?
        targetCanvasController.OnScreenContentPosition() :
            targetCanvasController.OffScreenBottomContentPosition();

    // Determine the content's end position.
    Vector3 contentEndPosition = (transitionContext.isUpstream) ?
        targetCanvasController.OffScreenBottomContentPosition() :
            targetCanvasController.OnScreenContentPosition();

    // Create a routine lasting `duration` seconds.
    Routine animation = new Routine(duration);

    // Execute the routine.
    animation.Run(OnUpdate: (progress01) =&gt;
    {
        // The update action is called every frame for the routine's duration,
        // passing in a progress01 value.

        // Move the canvas controller's content from the start position
        // to the end position, each frame.
        targetCanvasController.ContentPosition = Vector3.LerpUnclamped(
                    contentStartPosition,
                    contentEndPosition,
                    progress01);

    }, OnComplete: () =&gt;
    {
        // The completion action is called after `duration` seconds.
        transitionContext.CompleteTransition();
    });
}
</code></pre>

<h4 id="the-content-transform">The Content Transform</h4>
<p>To move a canvas controller's content, the <a href="../../../scripting-reference/canvas-controller/CanvasController/#contentposition">ContentPosition</a> (or <code>content.localPosition</code>) should be animated. Animating the canvas' transform itself will cause the canvas' <a href="../../../scripting-reference/canvas-controller/CanvasController/#camera">camera</a> to move with it, which, although moving the canvas in world space, will have no effect on the canvas' screen position. </p>
<p>Similarly, to scale or rotate the canvas, you should also perform these operations on the canvas controller's <a href="../../../scripting-reference/canvas-controller/CanvasController/#content">content</a> transform.</p>
<h4 id="use-the-helper-positioning-methods">Use The Helper Positioning Methods</h4>
<p>A canvas controller has several extension methods to help with positioning a canvas controller's content transform. These are used above to calculate the content's on/off-screen position.</p>
<ul>
<li><a href="../../../scripting-reference/canvas-controller/CanvasControllerExtensions/#onscreencontentposition">OnScreenContentPosition</a></li>
<li><a href="../../../scripting-reference/canvas-controller/CanvasControllerExtensions#offscreenbottomcontentposition">OffScreenBottomContentPosition</a></li>
<li><a href="../../../scripting-reference/canvas-controller/CanvasControllerExtensions#offscreenleftcontentposition">OffScreenLeftContentPosition</a></li>
<li><a href="../../../scripting-reference/canvas-controller/CanvasControllerExtensions#offscreentopcontentposition">OffScreenTopContentPosition</a></li>
</ul>
<h4 id="routine">Routine</h4>
<p>The above example, as well as all default transition animators, use Canvas Flow's <a href="../../../scripting-reference/routine/routine">Routine</a> class to perform their animation. You may also use this class to easily create a <a href="https://docs.unity3d.com/Manual/Coroutines.html">coroutine</a> with a progress and completion callback, as above.</p>
<h4 id="complete-the-transition">Complete The Transition</h4>
<p>When your transition animator has completed its animation, you <strong>must</strong> call <a href="../../../scripting-reference/canvas-controller/CanvasControllerTransitionContext/#completetransition">CompleteTransition</a> on the provided transition context. This tells Canvas Flow that the custom animation has been performed and to complete the transition.</p>
<h2 id="5-use-your-custom-transition-animator">5. Use Your Custom Transition Animator</h2>
<p>Once your custom transition animator is complete, it will be available to select in Unity's <em>Create</em> menu. Please refer to <a href="../using-a-transition-animator">Using A Transition Animator</a> to create an instance of your custom animator.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>© 2018 <a href="https://www.pelican7.com/" target="_blank">Pelican 7 LTD</a>. All rights reserved.</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/require.js"></script>
        <script src="../../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
